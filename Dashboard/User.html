<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>User Dashboard - Intelli-Read</title>
    <style>
        :root{
            --bg:#0f1724;
            --card:#0b1220;
            --muted:#9aa6b2;
            --accent:#6ee7b7;
            --accent-2:#60a5fa;
            --glass: rgba(255,255,255,0.03);
            --glass-2: rgba(255,255,255,0.02);
            --success:#10b981;
            --danger:#ef4444;
            --soft:#111827;
            font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
        }
        *{box-sizing:border-box}
        html,body{height:100%}
        body{
            margin:0;
            background:
                radial-gradient(1200px 400px at 10% 10%, rgba(96,165,250,0.06), transparent 8%),
                radial-gradient(1000px 300px at 90% 90%, rgba(110,231,183,0.04), transparent 10%),
                var(--bg);
            color:#e6eef6;
            -webkit-font-smoothing:antialiased;
            -moz-osx-font-smoothing:grayscale;
            padding:24px;
        }

        /* Layout */
        .wrap{
            max-width:1100px;
            margin:0 auto;
            display:grid;
            grid-template-columns: 280px 1fr;
            gap:20px;
            align-items:start;
        }
        @media (max-width:880px){
            .wrap{grid-template-columns:1fr; padding:0 12px}
        }

        /* Sidebar */
        aside{
            background:linear-gradient(180deg,var(--card), transparent 40%);
            border:1px solid rgba(255,255,255,0.03);
            padding:18px;
            border-radius:12px;
            height:fit-content;
        }
        .profile{
            display:flex;
            gap:12px;
            align-items:center;
            margin-bottom:12px;
        }
        .avatar{
            width:56px;height:56px;border-radius:10px;
            background:linear-gradient(135deg,var(--accent-2),var(--accent));
            display:flex;align-items:center;justify-content:center;font-weight:700;color:#04263b;
            box-shadow: 0 6px 18px rgba(2,6,23,0.6), inset 0 -6px 20px rgba(255,255,255,0.06);
        }
        h2{margin:0;font-size:18px}
        p.muted{margin:4px 0 0;color:var(--muted);font-size:13px}

        .summary{
            display:grid;
            grid-template-columns:repeat(2,1fr);
            gap:10px;
            margin-top:14px;
        }
        .stat{
            background:var(--glass);
            padding:10px;
            border-radius:10px;
            text-align:center;
        }
        .stat .num{font-size:18px;font-weight:700}
        .filters{margin-top:16px;display:flex;gap:8px;flex-direction:column}
        .filters button, .controls button{
            background:transparent;border:1px solid rgba(255,255,255,0.04);color:var(--muted);
            padding:9px 10px;border-radius:8px;cursor:pointer;font-size:13px;
        }
        .filters button.active{border-color:rgba(96,165,250,0.18);color:var(--accent-2);background:linear-gradient(180deg, rgba(96,165,250,0.03), transparent)}
        .controls{margin-top:14px;display:flex;gap:8px;flex-wrap:wrap}

        /* Main content */
        main{
            background:linear-gradient(180deg,var(--card), transparent 25%);
            border-radius:12px;padding:18px;border:1px solid rgba(255,255,255,0.03);
        }
        header.top{
            display:flex;align-items:center;gap:12px;justify-content:space-between;margin-bottom:14px;
        }
        .search{
            display:flex;gap:8px;align-items:center;background:var(--glass-2);padding:8px;border-radius:10px;border:1px solid rgba(255,255,255,0.02);
            width:100%;max-width:640px;
        }
        .search input{
            background:transparent;border:0;color:inherit;outline:none;font-size:14px;width:100%;
        }
        .actions{display:flex;gap:8px;align-items:center}
        .toggle-view{background:transparent;border:1px solid rgba(255,255,255,0.04);padding:8px;border-radius:8px;color:var(--muted);cursor:pointer}
        .counts{font-size:13px;color:var(--muted);margin-left:8px}

        /* Cards/grid */
        .grid{display:grid;grid-template-columns:repeat(3,1fr);gap:14px}
        @media (max-width:1100px){ .grid{grid-template-columns:repeat(2,1fr)}}
        @media (max-width:640px){ .grid{grid-template-columns:1fr} }

        .card{
            background:linear-gradient(180deg, rgba(255,255,255,0.02), transparent);
            border-radius:12px;padding:12px;border:1px solid rgba(255,255,255,0.03);
            display:flex;gap:12px;align-items:flex-start;
        }
        .cover{
            width:72px;height:100px;border-radius:8px;background:linear-gradient(135deg,var(--accent),var(--accent-2));
            flex-shrink:0;display:flex;align-items:center;justify-content:center;color:#052231;font-weight:700;
        }
        .card-body{flex:1}
        .title{font-size:15px;margin:0 0 6px}
        .meta{color:var(--muted);font-size:13px;margin-bottom:8px}
        .progress{
            height:8px;background:rgba(255,255,255,0.03);border-radius:8px;overflow:hidden;margin-bottom:8px;
        }
        .progress > i{display:block;height:100%;background:linear-gradient(90deg,var(--accent),var(--accent-2));border-radius:8px}

        .card-actions{display:flex;gap:8px;align-items:center}
        .btn{
            background:transparent;border:1px solid rgba(255,255,255,0.04);padding:8px 10px;border-radius:8px;color:var(--muted);cursor:pointer;font-size:13px;
        }
        .btn.primary{background:linear-gradient(90deg,var(--accent),var(--accent-2));color:#003241;border:none}
        .chip{font-size:12px;padding:6px 8px;border-radius:999px;background:rgba(255,255,255,0.02);border:1px solid rgba(255,255,255,0.02);color:var(--muted)}

        /* Table view */
        .table{width:100%;border-collapse:collapse}
        .table th, .table td{padding:10px 8px;text-align:left;border-bottom:1px dashed rgba(255,255,255,0.02);font-size:14px;color:#e6eef6}
        .table th{font-size:13px;color:var(--muted);font-weight:600}
        .small{font-size:13px;color:var(--muted)}

        /* footer counters */
        footer{margin-top:12px;display:flex;gap:10px;align-items:center;flex-wrap:wrap}
        .pill{background:rgba(255,255,255,0.02);padding:8px 10px;border-radius:999px;font-size:13px;color:var(--muted);border:1px solid rgba(255,255,255,0.03)}
        .ok{color:var(--success)}
        .warn{color:var(--danger)}
    </style>
</head>
<body>
    <div class="wrap">
        <aside>
            <div class="profile">
                <div class="avatar">U</div>
                <div>
                    <h2 id="username">User Name</h2>
                    <p class="muted" id="email">user@example.com</p>
                </div>
            </div>

            <div class="summary">
                <div class="stat">
                    <div class="num" id="totalBooks">0</div>
                    <div class="small">Books</div>
                </div>
                <div class="stat">
                    <div class="num" id="completedCount">0</div>
                    <div class="small">Completed</div>
                </div>
            </div>

            <div class="filters" aria-label="filters">
                <button data-filter="all" class="active">All</button>
                <button data-filter="reading">Reading</button>
                <button data-filter="completed">Completed</button>
                <button data-filter="downloaded">Downloaded</button>
            </div>

            <div class="controls">
                <button id="markAllRead">Mark all read</button>
                <button id="clearProgress">Reset progress</button>
            </div>
        </aside>

        <main>
            <header class="top">
                <div style="display:flex;gap:12px;align-items:center;flex:1">
                    <div class="search" role="search">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" aria-hidden><path d="M21 21l-4.35-4.35" stroke="rgba(255,255,255,0.4)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><circle cx="11" cy="11" r="6" stroke="rgba(255,255,255,0.4)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
                        <input id="search" placeholder="Search books, authors..." />
                    </div>
                    <div class="counts" id="viewCounts">Showing 0</div>
                </div>

                <div class="actions">
                    <button id="toggleView" class="toggle-view" aria-pressed="false">Cards</button>
                </div>
            </header>

            <section id="contentArea">
                <div class="grid" id="gridView" aria-live="polite">
                    <!-- cards injected -->
                </div>

                <div id="tableView" style="display:none">
                    <table class="table" id="booksTable" aria-live="polite">
                        <thead>
                            <tr>
                                <th>Title</th>
                                <th>Author</th>
                                <th style="width:160px">Progress</th>
                                <th style="width:120px">Status</th>
                                <th style="width:140px">Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- rows injected -->
                        </tbody>
                    </table>
                </div>
            </section>

            <footer>
                <div class="pill">Total: <strong id="footerTotal">0</strong></div>
                <div class="pill">Completed: <strong id="footerCompleted">0</strong></div>
                <div class="pill">Downloaded: <strong id="footerDownloaded">0</strong></div>
            </footer>
        </main>
    </div>

    <script>
        // Sample data - in a real app replace by API
        const sampleBooks = [
            {id: 'b1', title:'The Pragmatic Programmer', author:'A. Hunt', progress:100, downloaded:true},
            {id: 'b2', title:'Clean Code', author:'R. Martin', progress:76, downloaded:false},
            {id: 'b3', title:'You Don’t Know JS', author:'K. Simpson', progress:20, downloaded:true},
            {id: 'b4', title:'Eloquent JavaScript', author:'M. Haverbeke', progress:47, downloaded:false},
            {id: 'b5', title:'Design Patterns', author:'E. Gamma', progress:0, downloaded:false},
            {id: 'b6', title:'Refactoring', author:'M. Fowler', progress:88, downloaded:true}
        ];

        const STORAGE_KEY = 'intelliread_books_v1';

        // Utilities
        const $ = (sel, ctx=document) => ctx.querySelector(sel);
        const $$ = (sel, ctx=document) => Array.from(ctx.querySelectorAll(sel));

        // Initialize or load from storage
        function loadState(){
            const raw = localStorage.getItem(STORAGE_KEY);
            if (raw){
                try { return JSON.parse(raw); } catch(e){}
            }
            return sampleBooks;
        }
        function saveState(books){
            localStorage.setItem(STORAGE_KEY, JSON.stringify(books));
        }

        // App state
        let books = loadState();
        let filter = 'all';
        let view = 'cards'; // or 'table'
        let searchTerm = '';

        // Elements
        const gridView = $('#gridView');
        const tableView = $('#tableView');
        const booksTableBody = $('#booksTable tbody');
        const totalBooksEl = $('#totalBooks');
        const completedCountEl = $('#completedCount');
        const viewCountsEl = $('#viewCounts');
        const footerTotal = $('#footerTotal');
        const footerCompleted = $('#footerCompleted');
        const footerDownloaded = $('#footerDownloaded');

        function render(){
            // filtered & searched list
            let list = books.slice();

            if (searchTerm) {
                const q = searchTerm.toLowerCase();
                list = list.filter(b => b.title.toLowerCase().includes(q) || b.author.toLowerCase().includes(q));
            }

            if (filter === 'reading') list = list.filter(b => b.progress > 0 && b.progress < 100);
            if (filter === 'completed') list = list.filter(b => b.progress >= 100);
            if (filter === 'downloaded') list = list.filter(b => b.downloaded);

            // header counts
            totalBooksEl.textContent = books.length;
            const completed = books.filter(b => b.progress >= 100).length;
            completedCountEl.textContent = completed;
            footerTotal.textContent = books.length;
            footerCompleted.textContent = completed;
            footerDownloaded.textContent = books.filter(b => b.downloaded).length;
            viewCountsEl.textContent = `Showing ${list.length}`;

            // render grid
            gridView.innerHTML = '';
            list.forEach(b => {
                const card = document.createElement('div');
                card.className = 'card';
                card.innerHTML = `
                    <div class="cover" aria-hidden>${b.title.split(' ').slice(0,2).map(s=>s[0]).join('')}</div>
                    <div class="card-body">
                        <h3 class="title">${escapeHtml(b.title)}</h3>
                        <div class="meta">${escapeHtml(b.author)}</div>
                        <div class="progress" title="${b.progress}%"><i style="width:${Math.max(2, b.progress)}%"></i></div>
                        <div style="display:flex;justify-content:space-between;align-items:center">
                            <div class="card-actions">
                                <button class="btn toggle-read" data-id="${b.id}" aria-pressed="${b.progress>=100}">${b.progress>=100 ? 'Completed' : 'Mark Complete'}</button>
                                <button class="btn toggle-download" data-id="${b.id}" aria-pressed="${b.downloaded}">${b.downloaded ? 'Downloaded' : 'Download'}</button>
                            </div>
                            <div class="chip small">${b.progress}%</div>
                        </div>
                    </div>
                `;
                gridView.appendChild(card);
            });

            // render table
            booksTableBody.innerHTML = '';
            list.forEach(b => {
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td><strong>${escapeHtml(b.title)}</strong><div class="small">${escapeHtml(b.author)}</div></td>
                    <td class="small">${escapeHtml(b.author)}</td>
                    <td>
                        <div class="progress" title="${b.progress}%"><i style="width:${Math.max(2,b.progress)}%"></i></div>
                        <div class="small">${b.progress}%</div>
                    </td>
                    <td class="small">${b.progress>=100 ? '<span style="color:var(--success)">Completed</span>' : (b.downloaded ? '<span style="color:var(--accent-2)">Downloaded</span>' : 'In Progress')}</td>
                    <td>
                        <button class="btn toggle-read" data-id="${b.id}">${b.progress>=100 ? 'Undo' : 'Mark Complete'}</button>
                        <button class="btn toggle-download" data-id="${b.id}">${b.downloaded ? 'Remove DL' : 'Download'}</button>
                        <button class="btn primary btn-edit" data-id="${b.id}">Edit</button>
                    </td>
                `;
                booksTableBody.appendChild(tr);
            });

            // attach actions
            $$('.toggle-read').forEach(btn=>{
                btn.onclick = () => {
                    const id = btn.dataset.id;
                    toggleComplete(id);
                };
            });
            $$('.toggle-download').forEach(btn=>{
                btn.onclick = () => {
                    const id = btn.dataset.id;
                    toggleDownload(id);
                };
            });
            $$('.btn-edit').forEach(btn=>{
                btn.onclick = () => {
                    const id = btn.dataset.id;
                    editProgressPrompt(id);
                };
            });

            // toggle view UI
            $('#toggleView').textContent = view === 'cards' ? 'Cards' : 'Table';
            $('#toggleView').setAttribute('aria-pressed', view === 'table');
            gridView.style.display = view === 'cards' ? '' : 'none';
            tableView.style.display = view === 'table' ? '' : 'none';
        }

        function toggleComplete(id){
            books = books.map(b => b.id === id ? {...b, progress: b.progress>=100 ? 0 : 100} : b);
            saveState(books); render();
        }
        function toggleDownload(id){
            books = books.map(b => b.id === id ? {...b, downloaded: !b.downloaded} : b);
            saveState(books); render();
        }

        function editProgressPrompt(id){
            const book = books.find(b=>b.id===id);
            if (!book) return;
            const input = prompt('Set progress (0-100)', String(book.progress));
            if (input === null) return;
            const val = Math.min(100, Math.max(0, Number(input) || 0));
            books = books.map(b => b.id === id ? {...b, progress: val} : b);
            saveState(books); render();
        }

        // small helper to escape
        function escapeHtml(s){return String(s).replace(/[&<>"]/g, c=>({ '&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;' }[c]));}

        // wire up UI controls
        $('#search').addEventListener('input', e => {
            searchTerm = e.target.value.trim();
            render();
        });

        $$('.filters button').forEach(btn=>{
            btn.addEventListener('click', () => {
                $$('.filters button').forEach(b=>b.classList.remove('active'));
                btn.classList.add('active');
                filter = btn.dataset.filter;
                render();
            });
        });

        $('#toggleView').addEventListener('click', () => {
            view = view === 'cards' ? 'table' : 'cards';
            render();
        });

        $('#markAllRead').addEventListener('click', () => {
            if (!confirm('Mark all books as completed?')) return;
            books = books.map(b => ({...b, progress:100}));
            saveState(books); render();
        });

        $('#clearProgress').addEventListener('click', () => {
            if (!confirm('Reset all progress to 0?')) return;
            books = books.map(b => ({...b, progress:0}));
            saveState(books); render();
        });

        // initial render
        render();

        // keyboard shortcut: "/" to focus search
        window.addEventListener('keydown', e=>{
            if (e.key === '/') { e.preventDefault(); $('#search').focus(); }
        });

        // expose small API for demo/debug in console
        window.__IntelliRead = {
            getBooks: () => JSON.parse(JSON.stringify(books)),
            reset: () => { books = sampleBooks; saveState(books); render(); }
        };
    </script>
</body>
</html></div>